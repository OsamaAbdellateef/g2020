(this.webpackJsonpsan3etna=this.webpackJsonpsan3etna||[]).push([[3],{340:function(e,t,a){},341:function(e,t,a){},342:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),o=(a(340),a(16)),s=a(17),l=a(20),i=a.n(l),u=a(26),f=a(13),m=a(1),d=a(5),b=a(3),h=a.n(b),g=a(72),E={id:h.a.any,href:h.a.string,onClick:h.a.func,title:h.a.node.isRequired,disabled:h.a.bool,menuRole:h.a.string,rootCloseEvent:h.a.string,bsPrefix:h.a.string,variant:h.a.string,size:h.a.string},p=c.a.forwardRef((function(e,t){var a=e.title,n=e.children,r=e.bsPrefix,o=e.rootCloseEvent,s=e.variant,l=e.size,i=e.menuRole,u=e.disabled,f=e.href,b=e.id,h=Object(d.a)(e,["title","children","bsPrefix","rootCloseEvent","variant","size","menuRole","disabled","href","id"]);return c.a.createElement(g.a,Object(m.a)({ref:t},h),c.a.createElement(g.a.Toggle,{id:b,href:f,size:l,variant:s,disabled:u,childBsPrefix:r},a),c.a.createElement(g.a.Menu,{role:i,rootCloseEvent:o},n))}));p.displayName="DropdownButton",p.propTypes=E;var v=p,D=a(145),j=a(325),O=a(332),I=a(318),y=a(316),C=a(315),N=a(19),w=(a(341),a(14)),U=a.n(w),k=(a(42),Object(N.b)((function(e){return{currentUser:e.user.currentUser}}))((function(e){var t=e.currentUser,a=e.craft,n=e.crafterID,o=e.displayName,s=Object(r.useState)(!1),l=Object(f.a)(s,2),m=l[0],d=l[1],b=Object(r.useState)(""),h=Object(f.a)(b,2),E=h[0],p=h[1],N=Object(r.useState)(""),w=Object(f.a)(N,2),k=w[0],x=w[1],R=Object(r.useState)(""),q=Object(f.a)(R,2),z=q[0],S=q[1],P=Object(r.useState)(!1),L=Object(f.a)(P,2),T=L[0],W=L[1],B=Object(r.useState)([]),J=Object(f.a)(B,2),M=J[0],A=J[1],F=(new Date,function(){var e=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.collection("requests").get().then(console.log("hello there "));case 2:t=e.sent,a=t.docs.map((function(e){return e.data()})),A(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());Object(r.useEffect)((function(){F()}),[]),Object(r.useEffect)((function(){G()}),[M]);var G=function(){M.forEach((function(e){t.userID==e.userID&&n==e.crafterID&&(console.log("you have made this request "),W(!0))}))},H=function(){Q(),d(!1)},K=U.a.firestore(),Q=function(){p(""),S(""),x("")},V=function(){var e=Object(u.a)(i.a.mark((function e(a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.collection("requests").get().then(console.log("hello there "));case 2:n=e.sent,n.docs.map((function(e){return e.data()})).forEach((function(e){e.userID==t.userID&&a==e.crafterID&&K.collection("requests").doc("".concat(e.requestID)).delete().then((function(){console.log("deleted successfully "),W(!1)})).catch((function(e){console.log(e)}))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",null,T?c.a.createElement(v,{variant:"success",id:"dropdown-basic-button",title:"\u062a\u0645 \u0627\u0644\u0637\u0644\u0628 \u0628\u0646\u062c\u0627\u062d "},c.a.createElement(g.a.Item,{onClick:function(){V(n)}},"\u0627\u0644\u063a\u0627\u0621 \u0627\u0644\u0637\u0644\u0628 ")):c.a.createElement(D.a,{onClick:function(){d(!0),console.log(n)}},"\u0627\u0637\u0644\u0628 \u0627\u0644\u0622\u0646"),c.a.createElement(O.a,{open:m,onClose:H,"aria-labelledby":"form-dialog-title"},c.a.createElement(C.a,{id:"form-dialog-title"},"\u0627\u0631\u0633\u0627\u0644 \u0637\u0644\u0628 "),c.a.createElement(y.a,null,c.a.createElement(j.a,{autoFocus:!0,margin:"dense",id:"name",label:" \u0627\u0644\u0627\u0633\u0645 \u0643\u0627\u0645\u0644\u0627",type:"text",fullWidth:!0,onChange:function(e){p(e.target.value)}}),c.a.createElement(j.a,{margin:"dense",id:"address",label:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0628\u0627\u0644\u062a\u0641\u0635\u064a\u0644",type:"address",fullWidth:!0,onChange:function(e){S(e.target.value)}}),c.a.createElement(j.a,{margin:"dense",id:"pn",label:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641",type:"tel",fullWidth:!0,onChange:function(e){x(e.target.value)}})),c.a.createElement(I.a,null,c.a.createElement(D.a,{className:"mr-0 ml-2",disabled:!(E&&k&&z),onClick:function(){var e=U.a.firestore.Timestamp.fromDate(new Date),r=Math.random().toString(36).substr(2,9);K.collection("requests").doc("".concat(r)).set({clientName:"".concat(E),userID:"".concat(t.userID),phoneNumber:"".concat(k),address:z,createdAt:e,crafterID:"".concat(n),requestID:"".concat(r),crafterName:"".concat(o),craft:"".concat(a),accepted:"".concat(!1),done:"false"}).then((function(){console.log("Document successfully written!"),S(""),Q(),H(),W(!0)})).catch((function(e){console.error("Error writing document: ",e)}))}},"\u0627\u0631\u0633\u0627\u0644"),c.a.createElement(D.a,{variant:"danger",onClick:H},"\u0627\u063a\u0644\u0627\u0642 "))))})));U.a.firestore(),t.default=Object(N.b)((function(e){return{currentUser:e.user.currentUser}}))((function(e){e.currentUser,e.imageCraftURL;var t=e.crafterID,a=e.imagePersonalURL,r=e.craft,l=e.displayName,i=e.address,u=(e.userID,e.phoneNumber),f=Object(n.a)(e,["currentUser","imageCraftURL","crafterID","imagePersonalURL","craft","displayName","address","userID","phoneNumber"]);return c.a.createElement("div",Object.assign({className:"col-12 col-md-6 col-lg-3 mb-5 col craft-card"},f),c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"image-container"},c.a.createElement("img",{src:"".concat(a)})),c.a.createElement("div",{className:"details"},c.a.createElement("h5",null,c.a.createElement(s.a,{icon:o.o,size:"sm",transform:"left-4",color:"#3587D7"}),l),c.a.createElement("h5",null," ",c.a.createElement(s.a,{icon:o.g,size:"sm",transform:"left-4",color:"#3587D7"})," ",u),c.a.createElement("h5",null,c.a.createElement(s.a,{icon:o.l,size:"sm",transform:"left-4",color:"#3587D7"}),r),c.a.createElement("h5",null,c.a.createElement(s.a,{icon:o.a,size:"sm",transform:"left-4",color:"#3587D7"}),i),c.a.createElement(k,{crafterID:t,craft:r,displayName:l}))))}))}}]);
//# sourceMappingURL=3.d947cc41.chunk.js.map