{"version":3,"sources":["components/craft-preview/craft-preview.component.jsx"],"names":["CraftCard","lazy","firestore","firebase","CraftPreview","console","log","window","scrollTo","set_state","this","props","collection","get","then","usersRef","users","docs","map","doc","data","match","params","mC","nUsers","filter","user","signedAs","craft","currentURL","categoryId","className","myCrafts","worker","key","Math","random","fallback","height","width","imageCraftURL","displayName","address","phoneNumber","crafterID","userID","imagePersonalURL","React","Component","connect","workers","plumber","electrician","dispatch","stateName","value"],"mappings":"4RAUMA,G,MAAYC,gBAAK,kBAAM,kCAEvBC,EAAYC,IAASD,YAGrBE,E,gUAKEC,QAAQC,IAAI,mGAERC,OAAOC,SAAS,EAAG,GAChBC,EAAaC,KAAKC,MAAlBF,U,SAScP,EAAUU,WAAW,SAASC,MAAMC,KAAKT,QAAQC,IAAI,iB,OAAtES,E,OACAC,EAAQD,EAASE,KAAKC,KAAI,SAAAC,GAAG,OAAIA,EAAIC,UAEzCX,EAAU,aAAaC,KAAKC,MAAMU,MAAMC,QACxCb,EAAU,SAASO,GAEfO,EAAKb,KAAKC,MAAMa,OAAOC,QAAO,SAAAC,GAAI,MAAqB,UAAjBA,EAAKC,UAAwBD,EAAKE,OAAS,EAAKjB,MAAMkB,cAGhGpB,EAAU,WAAac,G,qJAOf,EACRb,KAAKC,MAAMF,UAAU,aAAa,IAClCJ,QAAQC,IAAI,kC,2CAIO,IAAD,OAClB,GAAGI,KAAKC,MAAMkB,aAAenB,KAAKC,MAAMU,MAAMC,OAAOQ,WAAY,CAC7DpB,KAAKC,MAAMF,UAAU,aAAeC,KAAKC,MAAMU,MAAMC,OAAOQ,YAC5D,IAAIP,EAAKb,KAAKC,MAAMa,OAAOC,QAAO,SAAAC,GAAI,MAAqB,UAAjBA,EAAKC,UAAwBD,EAAKE,OAAS,EAAKjB,MAAMU,MAAMC,OAAOQ,cAC7GpB,KAAKC,MAAMF,UAAU,WAAWc,M,+BAMpC,OAEI,yBAAKQ,UAAU,2BAGX,yBAAKA,UAAU,OACdrB,KAAKC,MAAMqB,SAASd,KAAI,SAAAe,GAAM,OAC3B,kBAAC,WAAD,CAAUC,IAAKC,KAAKC,SAAUC,SAAU,kBAAC,IAAD,CAAUC,OAAQ,IAAKC,MAAO,OACjE,kBAACvC,EAAD,CACDkC,IAAKC,KAAKC,SACVI,cAAeP,EAAOO,cAAeC,YAAaR,EAAOQ,YAAaC,QAAST,EAAOS,QACtFC,YAAaV,EAAOU,YACpBC,UAAWX,EAAOY,OAClBC,iBAAkBb,EAAOa,iBAAkBlB,MAASK,EAAOL,kB,GA9DxDmB,IAAMC,WAwFlBC,uBAbS,SAAC,GAAD,IAAGvB,EAAH,EAAGA,KAAH,MAAe,CACnCwB,QAASxB,EAAKwB,QACdC,QAASzB,EAAKyB,QACdC,YAAa1B,EAAK0B,YAClBpB,SAASN,EAAKM,SACdH,WAAYH,EAAKG,WACjBL,OAAQE,EAAKF,WAGU,SAAC6B,GAAD,MAAe,CACtC5C,UAAW,SAAC6C,EAAWC,GAAZ,OAAsBF,EAAS5C,YAAU6C,EAAWC,QAGpDN,CAA6C7C","file":"static/js/5.6302d1cb.chunk.js","sourcesContent":["import React, {Suspense , lazy} from 'react';\r\nimport './craft-preview.style.scss';\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport { set_state } from '../../redux/user/user.actions';\r\nimport { connect } from 'react-redux';\r\n//import CraftCard from '../craft-card/craft-card.component';\r\nimport Skeleton from 'react-loading-skeleton';\r\nimport spinnerComp from '../spinner/spinner.component';\r\nimport SpinnerComp from '../spinner/spinner.component';\r\nconst CraftCard = lazy(() => import( '../craft-card/craft-card.component'));\r\n \r\nconst firestore = firebase.firestore();\r\n\r\nvar mounted = true;\r\nclass CraftPreview extends React.Component {\r\n\r\n\r\n\r\n    async componentDidMount() {\r\n        console.log(\"###############################################################################################\")\r\n        \r\n            window.scrollTo(0, 0);\r\n        const {set_state} = this.props;\r\n        // const events = await firebase.firestore().collection('events')\r\n        // events.get().then((querySnapshot) => {\r\n        //     const tempDoc = []\r\n        //     querySnapshot.forEach((doc) => {\r\n        //        tempDoc.push({ id: doc.id, ...doc.data() })\r\n        //     })\r\n        //     console.log(tempDoc)\r\n        //  })\r\n        var usersRef = await firestore.collection(\"users\").get().then(console.log(\"hello there \"));\r\n        var users = usersRef.docs.map(doc => doc.data());\r\n  \r\n        set_state(\"currentURL\",this.props.match.params);\r\n        set_state(\"nUsers\",users)\r\n        \r\n        var mC = this.props.nUsers.filter(user => user.signedAs == \"worker\" && user.craft == this.props.currentURL);\r\n\r\n        \r\n        set_state(\"myCrafts\" , mC);\r\n        \r\n\r\n        \r\n    }\r\n\r\n    componentWillUnmount () {\r\n        mounted=false;\r\n        this.props.set_state(\"currentURL\",\"\");\r\n        console.log(\"the comp has been unmounted \");\r\n\r\n    }\r\n\r\n    componentDidUpdate () {\r\n        if(this.props.currentURL !== this.props.match.params.categoryId) {\r\n            this.props.set_state(\"currentURL\" , this.props.match.params.categoryId )\r\n            var mC = this.props.nUsers.filter(user => user.signedAs == \"worker\" && user.craft == this.props.match.params.categoryId);\r\n            this.props.set_state(\"myCrafts\",mC)\r\n            \r\n        }\r\n    }\r\n    render() {\r\n \r\n        return (\r\n\r\n            <div className=\"craft-preview container\">\r\n              \r\n               \r\n                <div className=\"row\" >\r\n                {this.props.myCrafts.map(worker => (\r\n                    <Suspense key={Math.random()} fallback={<Skeleton height={100} width={100} />}>\r\n                         <CraftCard  \r\n                        key={Math.random()}\r\n                        imageCraftURL={worker.imageCraftURL} displayName={worker.displayName} address={worker.address} \r\n                        phoneNumber={worker.phoneNumber} \r\n                        crafterID={worker.userID}\r\n                        imagePersonalURL={worker.imagePersonalURL} craft = {worker.craft} />\r\n                    </Suspense>\r\n                ))                \r\n                }\r\n               \r\n                         \r\n            </div >\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = ({ user }) => ({\r\n    workers: user.workers,\r\n    plumber: user.plumber,\r\n    electrician: user.electrician,\r\n    myCrafts:user.myCrafts,\r\n    currentURL: user.currentURL,\r\n    nUsers: user.nUsers\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    set_state: (stateName, value) => dispatch(set_state(stateName, value))\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CraftPreview);"],"sourceRoot":""}